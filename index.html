<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">

<title>Pixel City Intro</title>

<style>
body {
  margin: 0;
  background: #bfc0c2;
  overflow: hidden;
}

/* 팝업형 게임 캔버스 */
#game {
  position: absolute;
  width: 90vw;
  height: 70vh;
  background: #ffffff;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 6px solid #000;
  image-rendering: pixelated;
  overflow: hidden;
}

/* 스크롤용 레이어 */
.layer {
  position: absolute;
  width: 300%;
  height: 100%;
  image-rendering: pixelated;
}

/* 빌딩 레이어 */
#city {
  top: 0;
  height: 50%;
  background-image: url('data:image/png;base64,iVBOR...');
  background-repeat: repeat-x;
  background-size: contain;
  animation: scroll 20s linear infinite;
}

/* 숲 */
#trees {
  top: 45%;
  height: 15%;
  background-image: url('data:image/png;base64,iVBOR...');
  background-repeat: repeat-x;
  background-size: contain;
  animation: scroll 10s linear infinite;
}

/* 도로 */
#road {
  bottom: 0;
  height: 35%;
  background-image: url('data:image/png;base64,iVBOR...');
  background-repeat: repeat-x;
  background-size: contain;
  animation: scroll 5s linear infinite;
}

/* 자동차 */
.car {
  position: absolute;
  width: 40px;
  height: 25px;
  background-image: url('data:image/png;base64,iVBOR...');
  image-rendering: pixelated;
  animation: carmove 3s linear infinite;
}

@keyframes scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-33.33%); }
}

@keyframes carmove {
  0% { transform: translateX(-50px); }
  100% { transform: translateX(120vw); }
}

/* 텍스트 */
#titleBox {
  position: absolute;
  top: 10%;
  width: 100%;
  text-align: center;
  font-family: monospace;
  font-size: 32px;
  color: white;
  text-shadow: 3px 3px 0 #000;
}

#startBtn {
  position: absolute;
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);
  padding: 15px 40px;
  background: #222;
  color: white;
  font-size: 26px;
  border: 4px solid #fff;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="game">

  <div id="city" class="layer"></div>
  <div id="trees" class="layer"></div>
  <div id="road" class="layer"></div>

  <div class="car" style="bottom:10%; animation-delay:0s"></div>
  <div class="car" style="bottom:20%; animation-delay:1.3s"></div>

  <div id="titleBox"></div>
  <div id="startBtn">START</div>
</div>

<script>
/* 텍스트 타이핑 효과 */
const lines = [
  "SLEEEEEEEEEEP",
  "SLEEEEEEEEEEP",
  "SLEEEEEEEEEEP",
  "SLEEEEEEEEEEP"
];

let idx = 0;
let charIdx = 0;
const el = document.getElementById("titleBox");

function type() {
  if (idx < lines.length) {
    if (charIdx < lines[idx].length) {
      el.innerHTML += lines[idx][charIdx];
      charIdx++;
      setTimeout(type, 80);
    } else {
      el.innerHTML += "<br>";
      idx++;
      charIdx = 0;
      setTimeout(type, 150);
    }
  }
}

type();

/* 버튼 클릭 후 대화 모드 */
document.getElementById("startBtn").onclick = () => {
  let script = [
    "안녕?",
    "여행은 어때?",
    "너는 곧 3번째 수면 단계로 진입할 거야",
    "우선 어디 편한 곳에 자리를 잡고 앉아봐."
  ];

  let step = 0;

  const next = () => {
    if (step < script.length) {
      el.innerHTML = "";
      let t = script[step];
      let ci = 0;

      function typing(){
        if(ci < t.length){
          el.innerHTML += t[ci];
          ci++;
          setTimeout(typing, 50);
        }
      }
      typing();

      step++;
    }
  };
  next();

  document.getElementById("startBtn").innerText = "NEXT";
  document.getElementById("startBtn").onclick = next;
};
</script>

</body>
</html>