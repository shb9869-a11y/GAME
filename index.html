<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Pixel Engine</title>
<style>
  body{
    background:#000;
    color:#fff;
    font-family:monospace;
    padding:20px;
  }
  canvas{display:none;}
  .pixel-container{
    position:relative;
    image-rendering:pixelated;
  }
  .pixel{
    position:absolute;
    width:1px;
    height:1px;
  }
  .screen-title, .screen-city{
    display:none;
  }
</style>
</head>
<body>

<h2>ğŸ® SLEEEEEEEP PIXEL ENGINE</h2>
<p>ë„¤ê°€ ì›í•˜ëŠ” â€œì´ë¯¸ì§€ì™€ 100% ë™ì¼í•œ í”½ì…€ í™”ë©´â€ì„ HTMLë¡œ ìë™ ìƒì„±í•œë‹¤.</p>

<input type="file" id="fileInput" accept="image/*"><br><br>
<button onclick="generatePixelHTML()">ğŸ”® Generate Pixel HTML</button>

<h3>ğŸ“¦ ìƒì„±ëœ ì½”ë“œ (ë³µë¶™ìš©)</h3>
<textarea id="output" style="width:100%;height:300px;background:#111;color:#0f0;padding:10px;"></textarea>

<div id="preview"></div>

<script>
function generatePixelHTML(){
  const file = document.getElementById("fileInput").files[0];
  if(!file){
    alert("ì´ë¯¸ì§€ íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”.");
    return;
  }

  const img = new Image();
  img.onload = function(){
    const w = img.width;
    const h = img.height;

    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = w;
    canvas.height = h;
    ctx.drawImage(img, 0, 0);

    const imageData = ctx.getImageData(0, 0, w, h).data;

    let html = `
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pixel Perfect</title>
<style>
  body{margin:0;background:#000;}
  .canvas{
    position:relative;
    width:${w}px;
    height:${h}px;
    image-rendering:pixelated;
  }
  .p{
    position:absolute;
    width:1px;
    height:1px;
  }
</style>
</head>
<body>
<div class="canvas">
`;

    for(let y=0; y<h; y++){
      for(let x=0; x<w; x++){
        const i = (y*w + x) * 4;
        const r = imageData[i];
        const g = imageData[i+1];
        const b = imageData[i+2];
        const a = imageData[i+3] / 255;

        if(a === 0) continue;
        html += `<div class="p" style="left:${x}px;top:${y}px;background:rgba(${r},${g},${b},${a});"></div>`;
      }
    }

    html += `
</div>
</body>
</html>`;

    document.getElementById("output").value = html;
    document.getElementById("preview").innerHTML =
      `<iframe style="width:${w}px;height:${h}px;border:1px solid #555;" srcdoc='${html.replace(/'/g,"&apos;")}'></iframe>`;
  };

  img.src = URL.createObjectURL(file);
}
</script>

</body>
</html>