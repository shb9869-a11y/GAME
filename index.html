<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>SLEEEEEEEEEEP City Intro</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="SLEEEEP">
<meta name="theme-color" content="#111111">

<style>
  *{
    box-sizing:border-box;
    margin:0;
    padding:0;
  }
  html,body{
    height:100%;
  }
  body{
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:#050608;
    display:flex;
    justify-content:center;
    align-items:center;

    -webkit-user-select:none;
    user-select:none;
    -webkit-touch-callout:none;
    -webkit-tap-highlight-color:transparent;
  }

  /* 세로 모드일 때는 안내문만 */
  .rotate-warning{
    position:fixed;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    background:#000;
    color:#fff;
    text-align:center;
    padding:20px;
    z-index:1000;
    font-size:18px;
  }

  @media (orientation:portrait){
    .rotate-warning{display:flex;}
    .game-shell{display:none;}
  }

  /* ===== 팝업 게임 창 ===== */

  .game-shell{
    width:100vw;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .game-popup{
    position:relative;
    width:92vw;
    max-width:980px;
    aspect-ratio:16/9;
    background:#22252b;
    border-radius:16px;
    box-shadow:0 0 40px rgba(0,0,0,0.85);
    overflow:hidden;
    border:4px solid #08090b;
  }

  .game-root{
    position:absolute;
    inset:0;
    background:#b5c1cf;
    overflow:hidden;
  }

  /* ===== 하늘 ===== */
  .sky{
    position:absolute;
    inset:0;
    background:linear-gradient(to bottom,#d6dde8 0 55%,#b5c1cf 55% 100%);
  }

  /* ===== 시티 3 레이어 (참고 이미지 3개 섞은 느낌) ===== */

  .city{
    position:absolute;
    left:0;
    right:0;
    bottom:42%;
    top:0;
    overflow:hidden;
  }

  .city-layer{
    position:absolute;
    left:0;
    right:0;
    bottom:0;
    top:8%;
    opacity:0.95;
    image-rendering:pixelated;
  }

  /* 가장 뒤 회색/카키 톤 */
  .city-far{
    background:
      repeating-linear-gradient(
        to right,
        #858b93 0 26px,
        #858b93 26px 52px,
        transparent 52px 60px
      ),
      repeating-linear-gradient(
        to right,
        #9fa59c 0 30px,
        #9fa59c 30px 60px,
        transparent 60px 70px
      );
    background-size: 220px 100%, 260px 100%;
    animation: cityScrollFar 55s linear infinite;
  }

  /* 중간 보라/핑크 톤 */
  .city-mid{
    background:
      repeating-linear-gradient(
        to right,
        #7b6fa8 0 26px,
        #7b6fa8 26px 52px,
        transparent 52px 60px
      ),
      repeating-linear-gradient(
        to right,
        #c89bc2 0 30px,
        #c89bc2 30px 60px,
        transparent 60px 70px
      );
    background-size: 200px 100%, 240px 100%;
    animation: cityScrollMid 40s linear infinite;
    mix-blend-mode:multiply;
  }

  /* 앞쪽 컬러풀 빌딩 */
  .city-near{
    background:
      repeating-linear-gradient(
        to right,
        #4aa36a 0 26px,
        #4aa36a 26px 48px,
        transparent 48px 60px
      ),
      repeating-linear-gradient(
        to right,
        #ee5f7b 0 26px,
        #ee5f7b 26px 48px,
        transparent 48px 60px
      ),
      repeating-linear-gradient(
        to right,
        #3a7ec0 0 30px,
        #3a7ec0 30px 56px,
        transparent 56px 68px
      );
    background-size: 210px 100%, 250px 100%, 230px 100%;
    animation: cityScrollNear 28s linear infinite;
  }

  @keyframes cityScrollFar{
    0%{background-position:0 0,0 0;}
    100%{background-position:-320px 0,-260px 0;}
  }
  @keyframes cityScrollMid{
    0%{background-position:0 0,0 0;}
    100%{background-position:-260px 0,-210px 0;}
  }
  @keyframes cityScrollNear{
    0%{background-position:0 0,0 0,0 0;}
    100%{background-position:-220px 0,-280px 0,-250px 0;}
  }

  /* ===== 수풀 라인 ===== */

  .bush-band{
    position:absolute;
    left:0;
    right:0;
    bottom:40%;
    height:11%;
    background:
      repeating-linear-gradient(
        to right,
        #063616 0 8px,
        #063616 8px 12px,
        #09521f 12px 18px,
        #0f6b28 18px 24px
      );
    box-shadow:0 -4px 0 rgba(0,0,0,0.5);
  }

  /* ===== 도로 ===== */
  .road{
    position:absolute;
    left:4%;
    right:4%;
    bottom:4%;
    top:60%;
    background:#595b60;
    border-radius:10px;
    box-shadow:0 0 0 4px #22252b;
    overflow:hidden;
  }

  .road-edge-top,
  .road-edge-bottom{
    position:absolute;
    left:0;
    right:0;
    height:8px;
    background:
      repeating-linear-gradient(
        to right,
        #ededed 0 6px,
        #ededed 6px 12px,
        #444 12px 18px
      );
  }
  .road-edge-top{top:0;}
  .road-edge-bottom{bottom:0;}

  /* 차선 */
  .lane{
    position:absolute;
    left:0;
    right:0;
    height:6px;
    background:
      repeating-linear-gradient(
        to right,
        transparent 0 26px,
        #f6f6f6 26px 42px
      );
  }
  .lane.mid{ top:46%; }
  .lane.low{ top:72%; opacity:0.7; }

  /* ===== 가로등 ===== */

  .lamps{
    position:absolute;
    left:0;
    right:0;
    top:8%;
    height:32%;
    pointer-events:none;
  }

  .lamp{
    position:absolute;
    bottom:10%;
    width:6px;
    height:60%;
    background:#41444a;
    box-shadow:0 0 0 2px #2b2e32;
  }
  .lamp::before{
    content:'';
    position:absolute;
    left:50%;
    top:-18px;
    width:6px;
    height:18px;
    transform:translateX(-50%);
    background:#41444a;
  }
  .lamp::after{
    content:'';
    position:absolute;
    left:50%;
    top:-28px;
    width:20px;
    height:20px;
    transform:translateX(-50%);
    border-radius:50%;
    background:radial-gradient(circle at 30% 25%,#ffffcc 0,#ffe66b 40%,#ffc800 70%,#fbc600 100%);
    box-shadow:0 0 16px rgba(255,232,120,0.8);
  }

  /* ===== 자동차 ===== */

  .car{
    position:absolute;
    bottom:24%;
    width:42px;
    height:24px;
    background:#ffc83b;
    border-radius:8px 8px 4px 4px;
    border:3px solid #333;
    box-shadow:0 3px 0 rgba(0,0,0,0.6);
    animation: carMove 6.5s linear infinite;
  }
  .car::before,
  .car::after{
    content:'';
    position:absolute;
    bottom:-7px;
    width:14px;
    height:14px;
    border-radius:50%;
    background:#111;
  }
  .car::before{ left:4px; }
  .car::after{ right:4px; }

  .car.front{
    bottom:38%;
    transform:scale(0.85);
    animation-duration:5.2s;
    animation-delay:-2s;
  }

  @keyframes carMove{
    0%{ transform:translateX(-60px) scale(var(--scale,1)); }
    100%{ transform:translateX(110% ) scale(var(--scale,1)); }
  }

  /* ===== 타이틀 오버레이 ===== */

  .title-screen{
    position:absolute;
    inset:0;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:linear-gradient(to bottom,rgba(0,0,0,0.25),rgba(0,0,0,0.85));
    color:#ffffff;
    text-align:center;
    padding:20px;
    z-index:10;
  }

  .title-lines{
    font-family:monospace;
    font-size:clamp(18px,3.4vmin,28px);
    letter-spacing:0.08em;
    line-height:1.7;
    text-shadow:0 3px 0 rgba(0,0,0,0.9);
    margin-bottom:28px;
  }
  .title-lines span{
    display:block;
  }

  .btn{
    display:inline-block;
    padding:10px 30px;
    border-radius:999px;
    border:3px solid #111;
    background:#ffd666;
    color:#111;
    font-weight:600;
    font-size:16px;
    box-shadow:0 4px 0 #111;
    cursor:pointer;
  }
  .btn:active{
    transform:translateY(2px);
    box-shadow:0 2px 0 #111;
  }

  /* ===== 대화 상자 ===== */

  .dialog-layer{
    position:absolute;
    left:50%;
    bottom:6%;
    transform:translateX(-50%);
    width:90%;
    max-width:640px;
    padding:12px 16px;
    background:rgba(13,14,18,0.95);
    border:3px solid #ffffff;
    box-shadow:0 4px 0 rgba(0,0,0,0.8);
    border-radius:10px;
    display:none;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    color:#f5f5f5;
    font-size:15px;
  }

  .dialog-text{
    flex:1;
    text-align:left;
  }

  .dialog-btn{
    flex-shrink:0;
    padding:6px 12px;
    border-radius:8px;
    border:2px solid #fff;
    background:#ffb84d;
    color:#111;
    font-size:13px;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 3px 0 rgba(0,0,0,0.8);
    white-space:nowrap;
  }
  .dialog-btn:active{
    transform:translateY(1px);
    box-shadow:0 1px 0 rgba(0,0,0,0.8);
  }
</style>
</head>
<body>

<div class="rotate-warning">
  이 게임은 <strong>가로 모드</strong>에서만 사용할 수 있습니다.<br><br>
  기기를 가로로 돌려 주세요.
</div>

<div class="game-shell">
  <div class="game-popup">
    <div class="game-root">
      <div class="sky"></div>

      <div class="city">
        <div class="city-layer city-far"></div>
        <div class="city-layer city-mid"></div>
        <div class="city-layer city-near"></div>
      </div>

      <div class="bush-band"></div>

      <div class="road">
        <div class="road-edge-top"></div>
        <div class="road-edge-bottom"></div>

        <div class="lane mid"></div>
        <div class="lane low"></div>

        <div class="lamps">
          <!-- 가로등 여러 개 -->
          <div class="lamp" style="left:6%;"></div>
          <div class="lamp" style="left:18%;"></div>
          <div class="lamp" style="left:30%;"></div>
          <div class="lamp" style="left:42%;"></div>
          <div class="lamp" style="left:54%;"></div>
          <div class="lamp" style="left:66%;"></div>
          <div class="lamp" style="left:78%;"></div>
          <div class="lamp" style="left:90%;"></div>
        </div>

        <div class="car" style="--scale:1;"></div>
        <div class="car front" style="--scale:0.9;"></div>
      </div>

      <!-- 타이틀 오버레이 -->
      <div class="title-screen" id="title">
        <div class="title-lines">
          <span>SLEEEEEEEEEEP</span>
          <span>SLEEEEEEEEEEP</span>
          <span>SLEEEEEEEEEEP</span>
          <span>SLEEEEEEEEEEP</span>
        </div>
        <button class="btn" id="startBtn">Start</button>
      </div>

      <!-- 대화 상자 -->
      <div class="dialog-layer" id="dialog">
        <div class="dialog-text" id="dialogText"></div>
        <button class="dialog-btn" id="dialogNext">NEXT</button>
      </div>
    </div>
  </div>
</div>

<script>
  const titleEl  = document.getElementById('title');
  const startBtn = document.getElementById('startBtn');

  const dialogLayer = document.getElementById('dialog');
  const dialogText  = document.getElementById('dialogText');
  const dialogNext  = document.getElementById('dialogNext');

  const lines = [
    '안녕?',
    '여행은 어때?',
    '너는 곧 3번째 수면 단계로 진입할 거야.',
    '우선 어디 편한 곳에 자리를 잡고 앉아봐.'
  ];
  let idx = 0;

  function showLine(i){
    dialogText.textContent = lines[i];
    dialogLayer.style.display = 'flex';
  }

  startBtn.addEventListener('click', () => {
    titleEl.style.display = 'none';
    idx = 0;
    showLine(idx);
  });

  dialogNext.addEventListener('click', () => {
    idx++;
    if(idx < lines.length){
      showLine(idx);
      if(idx === lines.length - 1){
        dialogNext.textContent = 'OK';
      }
    }else{
      // 마지막 이후엔 버튼만 죽여두기
      dialogNext.disabled = true;
      dialogNext.style.opacity = 0.5;
    }
  });
</script>

</body>
</html>